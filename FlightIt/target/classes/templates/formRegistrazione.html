<!DOCTYPE html>
<html lang="en">
<head>
    <link href="/css/styleLogin.css?" rel="stylesheet"/>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/2c740d50fa.js" crossorigin="anonymous"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Acme&family=Lato:wght@300&family=Merriweather:ital,wght@1,300&family=Patua+One&family=Rubik&display=swap"
          rel="stylesheet">


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>FlightIt - Registrazione</title>
    <script type="text/javascript">
        function mostraPassword() {
            var passwordInput = document.getElementById("password");
            var eyeIcon = document.getElementById("eye-icon");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                eyeIcon.classList.remove("bi-eye-slash-fill");
                eyeIcon.classList.add("bi-eye-fill");
            } else {
                passwordInput.type = "password";
                eyeIcon.classList.remove("bi-eye-fill");
                eyeIcon.classList.add("bi-eye-slash-fill");
            }

        }
    </script>
</head>
<body>

<!-- Nella pagina saranno presenti delle form post in cui inserire:

    - Username
    - Password
    - Conferma Password
    - Nome
    - Cognome
    - Data di Nascita

    Di seguito un pulsante per confermare la registrazione e uno per tornare alla pagina di login

 -->

<header>
    <nav class="navbar navbar-expand-lg">
        <img class="navbar-brand img-fluid" src="/images/logo-siw.png" href="/" width="15%"/>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="mr-auto"></div>
            <div class="navbar-nav">
                <a class="nav-item nav-link active" href="/">Home <span class="sr-only">(current)</span></a>
                <a class="nav-item nav-link" href="/movies">Film</a>
                <a class="nav-item nav-link" href="/artists">Artisti</a>
                <button class="btn btn-danger my-2 my-sm-0" type="submit"><a href="/logout">Logout</a>
                </button>
            </div>
        </div>
    </nav>
</header>

<div class="panel">
    <form th:action="@{/register}" method="POST">
        <div>
            <div>
                <h2>Registrazione</h2>
            </div>
            <div>
                <div th:object="${credenziali}">
                <span th:if="${#fields.hasGlobalErrors()}">
                    <p th:each="err : ${#fields.globalErrors()}" th:text="${err}">
                </span>
                    <div class="form-field">
                        <input type="text" maxlength="30" class="username" name="username" required
                               th:field="*{username}" placeholder="Username"/>
                        <span class="username" th:if="${#fields.hasErrors('username')}"
                              th:errors="${credentials.username}"
                              th:style="'color:red'"> </span>
                    </div>
                    <div class="form-field">
                        <input type="password" maxlength="30" class="password" id="password" name="pwd" required
                               th:field="*{password}" placeholder="Password"/>
                        <span>
                    <i id="eye-icon" class="bi bi-eye-slash-fill" onclick="mostraPassword()"></i>
                </span>
                        <span class="password" th:if="${#fields.hasErrors('password')}"
                              th:errors="${credentials.password}"
                              th:style="'color:red'"></span>
                    </div>
                </div>
                <div th:object="${user}">
                    <div th:if="${#fields.hasGlobalErrors()}">
                        <p th:each="err : ${#fields.globalErrors()}" th:text="${err}">
                    </div>
                    <div class="form-field">
                        <input type="text" maxlength="30" class="nome" required th:field="*{nome}" placeholder="Nome"/>
                        <span class="nome" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"
                              th:style="'color:red'"></span>
                    </div>
                    <div class="form-field">
                        <input type="text" maxlength="30" class="cognome" required th:field="*{cognome}"
                               placeholder="Cognome"/>
                        <span class="cognome" th:if="${#fields.hasErrors('cognome')}" th:errors="*{cognome}"
                              th:style="'color:red'"></span>
                    </div>
                    <div class="form-field">
                        <input type="date" required name="dataN"/>
                        <span class="dataNascita" th:if="${#fields.hasErrors('dataNascita')}" th:errors="*{dataNascita}"
                              th:style="'color:red'"></span>
                    </div>
                </div>
            </div>
            <br>
            <div>
                <a class="btn btn-outline-success" type="submit">Registra</a>
            </div>
        </div>
    </form>
</div>
</body>
</html>